<!DOCTYPE html>
<html> 
  <head> 
        <meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta name="description" content="">
		<meta name="author" content="">
		<meta property="og:title" content="" >
		<meta property="og:url" content="">
		<meta property="og:image" content="">
		<meta property="og:description" content="" >
		<!-- Bootstrap core JavaScript -->
		<script src="./js/jquery.min.js"></script>
		<script src="./js/popper.min.js"></script>
		<script src="./js/bootstrap.min.js"></script>
		
		<script src="./js/d3.v4.min.js" charset="utf-8"></script>
		<script src="./js/vector1.js" charset="utf-8"></script> 
		<script src="./js/Point.js" charset="utf-8"></script> 
		<script src="./js/Turtle.js" charset="utf-8"></script> 
		<script src="./js/code.js" charset="utf-8"></script> 
		<script type="text/javascript">
		function FileViewer(args) {
			for (var p in args)
				this[p] = args[p];

			this.reader = new FileReader();

			this.reader.onloadend = (function(self) {
				return function() {
							self.loaded();
						}
			})(this);
		}
		FileViewer.prototype.load = function() {
			this.file = this.controller.files[0];
			this.reader.readAsText(this.file);
		}
		FileViewer.prototype.loaded = function() {
			console.log(this.reader.result);
			var mydata = JSON.parse(this.reader.result);
			this.Iterations.value = mydata.Iterations;
			this.Angle.value = mydata.Angle;
			this.Alphabet.value = mydata.Alphabet;
			this.Axoim.value = mydata.Axoim;
			
			this.Rule1.value = mydata.Rule1;
			this.Rule2.value = mydata.Rule2;
			this.Rule3.value = mydata.Rule3;
			this.Rule4.value = mydata.Rule4;
			this.Rule5.value = mydata.Rule5;
			this.Rule6.value = mydata.Rule6;
			
		}

		var file_viewer = undefined;

		function init() {
			file_viewer = new FileViewer(
				{
					controller: document.getElementById('Loadjson'),
					
					Iterations: document.getElementById('Iterations'),
					Angle: document.getElementById('Angle'),
					Alphabet: document.getElementById('Alphabet'),
					Axoim: document.getElementById('Axoim'),
					Rule1: document.getElementById('Rule1'),
					Rule2: document.getElementById('Rule2'),
					Rule3: document.getElementById('Rule3'),
					Rule4: document.getElementById('Rule4'),
					Rule5: document.getElementById('Rule5'),
					Rule6: document.getElementById('Rule6')
				}
			);
		}
		function jsonDownload(){
			var obj = {
					"Iterations": $('#Iterations')[0].value,
					"Angle": $('#Angle')[0].value,
					"Alphabet": $('#Alphabet')[0].value,
					"Axoim": $('#Axoim')[0].value,
					"Rule1": $('#Rule1')[0].value,
					"Rule2": $('#Rule2')[0].value,
					"Rule3": $('#Rule3')[0].value,
					"Rule4": $('#Rule4')[0].value,
					"Rule5": $('#Rule5')[0].value,
					"Rule6": $('#Rule6')[0].value
			}
			var data = "text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(obj));
			var a = document.createElement('a');
			a.href = 'data:' + data;
			a.download = 'data.json';
			a.innerHTML = 'download JSON';
			$('#container').empty();
			var container = document.getElementById('container');
			container.appendChild(a);

		}
		function svgDownload(){
			$('#svgdownload-div').empty();
			$('#svgdownload-div').append(
				$('<a>')
			      .attr('href-lang', 'image/svg+xml')
			      .attr('href', 'data:image/svg+xml;utf8,' +  unescape($('svg')[0].outerHTML))
			      .attr('download', 'file.svg')
			      .text('Download SVG')
			  );
		}
		</script>
        <title>L-System</title> 
		<!-- Bootstrap core CSS -->
		<link href="./css/bootstrap.min.css" rel="stylesheet">

		<!-- Custom styles for this template -->
		<link href="./css/simple-sidebar.css" rel="stylesheet">
  </head> 
    <body onload="init();"> 
    <div id="wrapper">
        <!-- Sidebar -->
        <div id="sidebar-wrapper">
<!-- 			<div class="Data-Content">
				<div class="Data-Title">
					<div class="AlignRight">
						<label class="formfield" for="Iterations">Iterations</label><br />
						<label class="formfield" for="Angle">Angle</label><br />
						<label class="formfield" for="Alphabet">Alphabet</label><br />
						<label class="formfield" for="Axoim">Axoim</label><br />
						<label class="formfield" for="Rule1">Rule1</label><br />
						<label class="formfield" for="Rule2">Rule2</label><br />
						<label class="formfield" for="Rule3">Rule3</label><br />
						<label class="formfield" for="Rule4">Rule4</label><br />
						<label class="formfield" for="Rule5">Rule5</label><br />
						<label class="formfield" for="Rule6">Rule6</label><br />
						<input type="button" onclick=exec() class="btn btn-primary" value="Start" />
					</div>
				</div>
				<div class="Data-Items">
					<textarea rows="1" cols="40" id="Iterations"></textarea>
					<textarea rows="1" cols="40" id="Angle"></textarea>
					<textarea rows="1" cols="40" id="Alphabet"></textarea>
					<textarea rows="1" cols="40" id="Axoim"></textarea>
					<textarea rows="1" cols="40" id="Rule1"></textarea>
					<textarea rows="1" cols="40" id="Rule2"></textarea>
					<textarea rows="1" cols="40" id="Rule3"></textarea>
					<textarea rows="1" cols="40" id="Rule4"></textarea>
					<textarea rows="1" cols="40" id="Rule5"></textarea>
					<textarea rows="1" cols="40" id="Rule6"></textarea>

				</div>
			</div> -->
			<div class = "gg">
				<table class = "gg">
					<tr>
						<td>
							<label for="Loadjson">Loadjson</label>
						</td>
						<td>
							<input type="file" id="Loadjson" name="Loadjson" 
							accept=".json" style="color:#fff;" onchange="file_viewer.load();">
						</td>
					</tr>
					<tr>
						<td>
							<label for="Iterations">Iterations</label>
						</td>					
						<td>
							<input type="text" name="Iterations" id="Iterations" value="">
						</td>
					</tr>				
					<tr>
						<td>
							<label for="Angle">Angle</label>
						</td>					
						<td>
							<input type="text" name="Angle" id="Angle" value="">
						</td>
					</tr>
					<tr>
						<td>
							<label for="Alphabet">Alphabet</label>
						</td>					
						<td>
							<input type="text" name="Alphabet" id="Alphabet" value="">
						</td>
					</tr>
					<tr>
						<td>
							<label for="Axoim">Axoim</label>
						</td>					
						<td>
							<textarea rows="1" cols="45" id="Axoim"></textarea>
						</td>
					</tr>
					<tr>
						<td>
							<label for="Rule1">Rule1</label>
						</td>					
						<td>
							<textarea rows="2" cols="45" id="Rule1"></textarea>
						</td>
					</tr>
					<tr>
						<td>
							<label for="Rule2">Rule2</label>
						</td>					
						<td>
							<textarea rows="2" cols="45" id="Rule2"></textarea>
						</td>
					</tr>
					<tr>
						<td>
							<label for="Rule3">Rule3</label>
						</td>					
						<td>
							<textarea rows="2" cols="45" id="Rule3"></textarea>
						</td>
					</tr>
					<tr>
						<td>
							<label for="Rule4">Rule4</label>
						</td>					
						<td>
							<textarea rows="2" cols="45" id="Rule4"></textarea>
						</td>
					</tr>
					<tr>
						<td>
							<label for="Rule5">Rule5</label>
						</td>					
						<td>
							<textarea rows="2" cols="45" id="Rule5"></textarea>
						</td>
					</tr>
					<tr>
						<td>
							<label for="Rule6">Rule6</label>
						</td>					
						<td>
							<textarea rows="2" cols="45" id="Rule6"></textarea>
						</td>
					</tr>
					<tr>
						<td><input type="button" onclick="exec(); jsonDownload(); svgDownload();" class="btn btn-primary" value="Start" />
						</td>
						<td>
							<div id = "container">
							</div>>
						</td>
					</tr>
				</table>
			</div>	
        </div>
		
        <!-- /#sidebar-wrapper -->

        <!-- Page Content -->
        <div id="page-content-wrapper">
            <div class="container-fluid">
                <a href="#menu-toggle" class="btn btn-secondary" id="menu-toggle"><</a>
                <div id="svgdownload-div"></div>
				<svg id="svg-main"width="100%" height="95%" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" style="border:1px solid; background:#fff;"></svg>
            </div>
        </div>
        <!-- /#page-content-wrapper -->

    </div>
    <!-- /#wrapper -->
		<!-- Menu Toggle Script -->
    <script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
	$(document).ready(function () {
		$('#menu-toggle').click();
	});
    </script>
    </body> 
</html>